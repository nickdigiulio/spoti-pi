[{"/Users/nickdigiulio/Workspace/spoti-pi/src/index.js":"1","/Users/nickdigiulio/Workspace/spoti-pi/src/App.js":"2","/Users/nickdigiulio/Workspace/spoti-pi/src/reportWebVitals.js":"3","/Users/nickdigiulio/Workspace/spoti-pi/src/polyfill.js":"4","/Users/nickdigiulio/Workspace/spoti-pi/src/redux/store.js":"5","/Users/nickdigiulio/Workspace/spoti-pi/src/redux/rootReducer.js":"6","/Users/nickdigiulio/Workspace/spoti-pi/src/redux/trackInfo.js":"7","/Users/nickdigiulio/Workspace/spoti-pi/src/containers/Layout.js":"8","/Users/nickdigiulio/Workspace/spoti-pi/src/containers/index.js":"9","/Users/nickdigiulio/Workspace/spoti-pi/src/containers/Content.js":"10","/Users/nickdigiulio/Workspace/spoti-pi/src/routes.js":"11","/Users/nickdigiulio/Workspace/spoti-pi/src/views/Clock.js":"12","/Users/nickdigiulio/Workspace/spoti-pi/src/views/Connect.js":"13","/Users/nickdigiulio/Workspace/spoti-pi/src/views/NowPlaying.js":"14","/Users/nickdigiulio/Workspace/spoti-pi/src/redux/auth.js":"15","/Users/nickdigiulio/Workspace/spoti-pi/src/containers/PlayStatus.js":"16","/Users/nickdigiulio/Workspace/spoti-pi/src/redux/background.js":"17"},{"size":258,"mtime":1610922830154,"results":"18","hashOfConfig":"19"},{"size":669,"mtime":1611033442297,"results":"20","hashOfConfig":"19"},{"size":362,"mtime":1610922088573,"results":"21","hashOfConfig":"19"},{"size":1429,"mtime":1610922813695,"results":"22","hashOfConfig":"19"},{"size":842,"mtime":1610989722234,"results":"23","hashOfConfig":"19"},{"size":317,"mtime":1611031152695,"results":"24","hashOfConfig":"19"},{"size":3034,"mtime":1611990249658,"results":"25","hashOfConfig":"19"},{"size":195,"mtime":1611029162951,"results":"26","hashOfConfig":"19"},{"size":149,"mtime":1611011940437,"results":"27","hashOfConfig":"19"},{"size":2941,"mtime":1611033590570,"results":"28","hashOfConfig":"19"},{"size":585,"mtime":1611029970381,"results":"29","hashOfConfig":"19"},{"size":3510,"mtime":1612067326178,"results":"30","hashOfConfig":"19"},{"size":702,"mtime":1611097484432,"results":"31","hashOfConfig":"19"},{"size":3717,"mtime":1611968822492,"results":"32","hashOfConfig":"19"},{"size":827,"mtime":1611969171802,"results":"33","hashOfConfig":"19"},{"size":342,"mtime":1611029482995,"results":"34","hashOfConfig":"19"},{"size":588,"mtime":1611100925423,"results":"35","hashOfConfig":"19"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},"141bnui",{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"38"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"58","usedDeprecatedRules":"38"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},"/Users/nickdigiulio/Workspace/spoti-pi/src/index.js",[],["73","74"],"/Users/nickdigiulio/Workspace/spoti-pi/src/App.js",[],"/Users/nickdigiulio/Workspace/spoti-pi/src/reportWebVitals.js",[],"/Users/nickdigiulio/Workspace/spoti-pi/src/polyfill.js",[],"/Users/nickdigiulio/Workspace/spoti-pi/src/redux/store.js",[],"/Users/nickdigiulio/Workspace/spoti-pi/src/redux/rootReducer.js",[],"/Users/nickdigiulio/Workspace/spoti-pi/src/redux/trackInfo.js",["75","76","77","78"],"const INIT_GET_TRACK_INFO = \"INIT_GET_TRACK_INFO\";\nconst SET_TRACK_INFO = \"SET_TRACK_INFO\";\nconst GET_TRACK_INFO_FAILED = \"GET_TRACK_INFO_FAILED\";\nconst SET_PLAYBACK_STATUS = \"SET_PLAYBACK_STATUS\";\n\n\n// Action Reducer\nconst initState = {\n  loading: false,\n  track: {\n    album: {\n      name: 'Loading',\n      images: [\n        {\n          url: '../mstile-150x150.png'\n        }\n      ]\n    },\n    name: 'Loading',\n    artists: [\n      {\n        name: 'Now'\n      }\n    ]\n  },\n  isPlaying: false\n}\n\nconst trackInfoReducer = (state = initState, action) => {\n  switch(action.type){\n    case INIT_GET_TRACK_INFO:\n      return {\n        ...state,\n        loading: true\n      }\n\n    case SET_TRACK_INFO:\n      return {\n        ...state,\n        loading:false,\n        track: {...action.payload},\n      }\n\n    case SET_PLAYBACK_STATUS:\n      return {\n        ...state,\n        loading:false,\n        isPlaying: action.payload,\n      }\n\n    case GET_TRACK_INFO_FAILED:\n        return initState\n\n    default:\n      return state\n  }\n};\n\nconst backendUrl = process.env.REACT_APP_ENV === 'dev' ? 'http://localhost:5050' : 'https://nowify-api.nickdigiulio.com';\nconsole.log(backendUrl);\n\nexport const getMyCurrentPlayingTrack = () => {\n  return (dispatch) => {\n    dispatch({type: INIT_GET_TRACK_INFO})\n    let fetchFailed = false;\n    const intervalid = setInterval(async function(){\n      const response = fetch(backendUrl + '/now_playing')\n        .then((response) => {\n          if ( response.status == 200 ) {\n            response.json().then((data) => {\n              if ( Object.keys(data).length > 0 ) {\n                dispatch({type: SET_TRACK_INFO, payload: data.item});\n                dispatch({type: SET_PLAYBACK_STATUS, payload: data.is_playing});\n              } else {\n                dispatch({type: SET_PLAYBACK_STATUS, payload: false});\n              }\n            }).catch((err) => {\n              console.log(\"couldn't parse response\");\n              console.log(err);\n            })\n          } else if ( response.status == 404 ) {\n            console.log(\"recieved 404 while fetching track info\");\n            fetch(backendUrl + '/refresh')\n            .then(() => {\n                console.log(\"refreshed token\");\n            }).catch((err) => {\n              console.log(\"couldn't refresh token: \"+err);\n            })\n          }\n        }).catch((err) => {\n          console.log(err);\n        })\n    }, 2000);\n    if ( fetchFailed ) {\n      console.log(\"fetch failed\");\n      clearInterval(intervalid);\n    }\n  }\n}\n\n\nexport const trackAction = (action) => {\n  return (dispatch) => {\n    console.log(\"action: \"+action);\n    const response = fetch(backendUrl + '/' + action)\n      .then((response) => {\n        response.json()\n          .then((data) => {\n            dispatch({type: SET_TRACK_INFO, payload: data.item});\n            dispatch({type: SET_PLAYBACK_STATUS, payload: data.is_playing});\n          }).catch((err) => {\n            console.log(err);\n          })\n      })\n  };\n}\n\nexport default trackInfoReducer;\n","/Users/nickdigiulio/Workspace/spoti-pi/src/containers/Layout.js",[],"/Users/nickdigiulio/Workspace/spoti-pi/src/containers/index.js",[],"/Users/nickdigiulio/Workspace/spoti-pi/src/containers/Content.js",["79"],"import React, { Suspense } from \"react\";\nimport { Redirect, Route, Switch } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\n\n// routes config\nimport routes from \"../routes\";\n\nconst loading = (\n  <div className=\"pt-3 text-center\">\n    <div className=\"sk-spinner sk-spinner-pulse\"></div>\n  </div>\n);\n\n// There is not a React hook equivalent of componentDidCatch()\n// which is why Class component is being used instead of functional component\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n    this.dispatch = props.dispatch;\n    this.history = props.history;\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidMount() {\n    // This is needed to clear the state when history has been changed\n    this.unlisten = this.props.history.listen((location, action) => {\n      if (this.state.hasError) {\n        this.setState({ hasError: false });\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.unlisten();\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // Log the error to an error reporting service\n    console.log(error);\n    console.log(errorInfo);\n  }\n\n  render() {\n\n    if (this.state.hasError) {\n      return (\n        <>\n          <h1 className=\"display-3\">\n            <span style={{ fontSize: \"2.5rem\", display: \"flex\", justifyContent: \"center\"}}>\n              Oops! Something went wrong.\n            </span>\n          </h1>\n          <p className=\"lead\">\n            <span style={{ color: \"#3c4b64\", display: \"flex\", justifyContent: \"center\" }}>\n              Please log out and try again. If the problem persists, please\n              contact us.\n            </span>\n          </p>\n        </>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nconst Content = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const bgColor = useSelector((state) => state.background.background);\n  return (\n    <main className=\"wrapper\" id=\"background\" style={{ background: bgColor }}>\n      <Suspense fallback={<h1>waiting</h1>}>\n        <ErrorBoundary dispatch={dispatch} history={history}>\n          <Switch>\n            {routes.map((route, idx) => {\n              return (\n                route.component && (\n                  <Route\n                    key={idx}\n                    path={route.path}\n                    exact={route.exact}\n                    name={route.name}\n                    render={(props) => (\n                      <route.component {...props} />\n                    )}\n                  />\n                )\n              );\n            })}\n            <Redirect from=\"/\" to=\"/connect\" />\n          </Switch>\n        </ErrorBoundary>\n      </Suspense>\n    </main>\n  );\n};\n\nexport default React.memo(Content);\n","/Users/nickdigiulio/Workspace/spoti-pi/src/routes.js",[],"/Users/nickdigiulio/Workspace/spoti-pi/src/views/Clock.js",["80"],"/Users/nickdigiulio/Workspace/spoti-pi/src/views/Connect.js",[],"/Users/nickdigiulio/Workspace/spoti-pi/src/views/NowPlaying.js",[],"/Users/nickdigiulio/Workspace/spoti-pi/src/redux/auth.js",[],"/Users/nickdigiulio/Workspace/spoti-pi/src/containers/PlayStatus.js",[],"/Users/nickdigiulio/Workspace/spoti-pi/src/redux/background.js",[],{"ruleId":"81","replacedBy":"82"},{"ruleId":"83","replacedBy":"84"},{"ruleId":"85","severity":1,"message":"86","line":67,"column":13,"nodeType":"87","messageId":"88","endLine":67,"endColumn":21},{"ruleId":"89","severity":1,"message":"90","line":69,"column":32,"nodeType":"91","messageId":"92","endLine":69,"endColumn":34},{"ruleId":"89","severity":1,"message":"90","line":81,"column":39,"nodeType":"91","messageId":"92","endLine":81,"endColumn":41},{"ruleId":"85","severity":1,"message":"86","line":105,"column":11,"nodeType":"87","messageId":"88","endLine":105,"endColumn":19},{"ruleId":"85","severity":1,"message":"93","line":9,"column":7,"nodeType":"87","messageId":"88","endLine":9,"endColumn":14},{"ruleId":"94","severity":1,"message":"95","line":101,"column":8,"nodeType":"96","endLine":101,"endColumn":31,"suggestions":"97"},"no-native-reassign",["98"],"no-negated-in-lhs",["99"],"no-unused-vars","'response' is assigned a value but never used.","Identifier","unusedVar","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'loading' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useLayoutEffect has a missing dependency: 'updatePosition'. Either include it or remove the dependency array. Mutable values like 'ref.current' aren't valid dependencies because mutating them doesn't re-render the component.","ArrayExpression",["100"],"no-global-assign","no-unsafe-negation",{"desc":"101","fix":"102"},"Update the dependencies array to be: [dispatch, updatePosition]",{"range":"103","text":"104"},[2898,2921],"[dispatch, updatePosition]"]